<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sleep Detection</title>
    <link rel="stylesheet" href="/styles.css" />
    <style>
      .row { display:flex; gap:16px; align-items:center; flex-wrap:wrap; }
      .status { font-weight:bold; font-size:1.2rem; }
    </style>
  </head>
  <body>
    <header>
      <h1>Sleep Detection</h1>
      <p class="muted">Band power を使って睡眠状態を判定します。</p>
    </header>
    <main>
      <section class="row">
        <button id="start">Start</button>
        <button id="stop">Stop</button>
        <span id="wsstatus" class="muted">WS: connecting…</span>
      </section>
      <section>
        <h3>Current State</h3>
        <div class="row">
          <div id="state" class="status">-</div>
          <div id="confidence" class="muted"></div>
          <div id="quality" class="muted"></div>
        </div>
        <div id="ratio" class="muted"></div>
      </section>
      <section>
        <h3>Realtime Metrics</h3>
        <div class="muted small">左Y: theta/alpha (0–3)、右Y: beta_rel・motion (0–1)。下段はステージの推移。</div>
        <canvas id="chart" width="900" height="260" style="max-width:100%; background: #fff; border-radius: 8px; box-shadow: 0 0 0 1px #ccc3 inset;"></canvas>
        <div class="row small muted" style="margin-top:6px; gap:16px; align-items:center;">
          <span><span style="display:inline-block;width:10px;height:10px;background:#1d4ed8;border-radius:2px;margin-right:6px;"></span>theta/alpha</span>
          <span><span style="display:inline-block;width:10px;height:10px;background:#059669;border-radius:2px;margin-right:6px;"></span>beta_rel</span>
          <span><span style="display:inline-block;width:10px;height:10px;background:#d97706;border-radius:2px;margin-right:6px;"></span>motion RMS</span>
        </div>
      </section>
    </main>
    <script type="module" src="./index.js"></script>
  </body>
</html>
